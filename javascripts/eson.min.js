/*!
Eson Date input control
first create by 'UANV,ESONCalendar and so on'
modify by anlige @ www.thinkasp.cn
last modify at 2015-11-2
*/
(function(){var F=0,f=[31,28,31,30,31,30,31,31,30,31,30,31],o={},v="calendar-skin-(\\w+)";var r=function(){var R=null;if(window.XMLHttpRequest){R=new XMLHttpRequest();r=function(){return new XMLHttpRequest()}}else{if(window.ActiveXObject){var S=["MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0"],V;for(var U=S.length-1;U>=0;U--){try{V=new ActiveXObject(S[U]);r=(function(W){return function(){return new ActiveXObject(W)}})(S[U]);R=V}catch(T){}}}}return R};var s=function(S,U,R){R=R||0;U=U||function(){};if(o.hasOwnProperty(S)){return U()}o[S]="yes";var T=r();if(!T){return}T.open("GET",x.skin_path+S+".css",true);T.onreadystatechange=function(){if(T.readyState==4){if(T.status==200||T.status==304){var V=".inline-block {display:inline-block;zoom:1;*display:inline; }\n"+(T.responseText||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\}([\w\.\#])/g,"}\n$1").replace(/(^|,)(\s*)\./gm,"$1.calendar-skin-"+S+" .");try{var W=document.createElement("style");W.type="text/css";W.innerHTML=V;document.getElementsByTagName("head")[0].appendChild(W)}catch(X){var W=document.createElement("div");W.innerHTML='_<style type="text/css">'+V+"</style>";document.body.appendChild(W);W.removeChild(W.firstChild)}U()}else{if(R==0){s("eson",U,1)}}T=null}};T.send(null)};function u(R,S){s(S,function(){if(t(R,v)){g(R,v);A(R,"calendar-skin-"+S)}})}var z=function(S,R){S=S||(new Date());R=R.replace(/(yyyy|mm|dd|hh|ss|m|d|h|s)/ig,function(T){switch(T){case"yyyy":return S.getFullYear();case"M":return S.getMonth()+1;case"MM":return O(S.getMonth()+1);case"d":return S.getDate();case"dd":return O(S.getDate());case"H":return S.getHours();case"HH":return O(S.getHours());case"h":return S.getHours()%12;case"hh":return O(S.getHours()%12);case"m":return S.getMinutes();case"mm":return O(S.getMinutes());case"s":return S.getSeconds();case"ss":return O(S.getSeconds());default:return T}});return R};function Q(S){if(!S){return document}var R=S.target;if(!R){R=S.srcElement}if(R.nodeType===3){R=R.parentNode}return R||document}function O(R){return("0"+R).slice(-2)}function a(S,R){for(var T in S){if(!R.hasOwnProperty(T)){R[T]=S[T]}}return R}function j(W,S){if(!S){return}W||(W=document.body);var R=S.length,U,V;for(var T=0;T<R;T++){U=S[T];if(typeof U=="string"){W.appendChild(document.createTextNode(U))}else{V=document.createElement(U[0]);if(U[1]){V.className=U[1]}if(U[2]){V.innerHTML=U[2]}W.appendChild(V);S[T]=V}}}function P(U,W,T,S,R){var V=document.createElement(U.toUpperCase());W&&(V.id=W);S&&(V.className=S);R&&(V.innerHTML=R);T||(T=document.body);return T.appendChild(V)}function C(R,T){var S=new Date(R);S.setDate(T);return S.getDay()}function G(R){var T,S=f[R.getMonth()];if(S!=28){return S}T=R.getFullYear();if(T%4==0&&T%100!=0||T%400==0){return 29}return S}function M(T,U,V){U.className="calendar-quick-contents date-part-y";V=V||(T-11);if(V<0){V=0}var S="<a>&lt;&lt;&lt;</a>";for(var R=V;R<V+23;R++){S+="<a"+(R==T?' class="hover"':"")+">"+R+"</a>"}S+="<a>&gt;&gt;&gt;</a>";L(U,S);y(U.parentNode)}function e(U,T){var S='<div class="date-part-M">';for(var R=1;R<=12;R++){S+="<a"+(R==U?' class="hover"':"")+">"+R+"</a>"}L(T,S+"</div>");y(T.parentNode)}function D(W,X,S,V){var U='<div class="date-part-'+V+'">',R="";for(var T=0;T<=S;T++){R="";if(T==X){R+="hover "}if(T%2==1){R+="odd "}if(R!=""){R=R.slice(0,-1)}U+="<a"+(R!=""?' class="'+R+'"':"")+">"+T+"</a>"}L(W,U+"</div>");y(W.parentNode)}function L(S,R){if(R===true){return parseInt(S.innerHTML)}if(R!==undefined){S.innerHTML=typeof R=="object"?R.innerHTML:R}return S.innerHTML}function B(S,R){return S.offsetLeft+Math.floor(S.offsetWidth/2)+R}function y(S,R){S.style.display=R||"block"}function J(R){R.style.display="none"}function p(R){return R.getFullYear()+("0"+(R.getMonth()+1)).slice(-2)+("0"+R.getDate()).slice(-2)}function i(R){return R.style.display!="none"}function c(R){return R.nextSibling}function m(R){return R.previousSibling}function b(S){var R={x:S.offsetLeft,y:S.offsetTop,h:S.offsetHeight};while(S=S.offsetParent){R.x+=S.offsetLeft;R.y+=S.offsetTop}return R}function N(U,T){y(U.main);var V=b(T),S=V.y+V.h,R=V.x;y(U.arraw_up);J(U.arraw_down);if(S+U.main.offsetHeight>k()+H()){S=V.y-U.main.offsetHeight-5;J(U.arraw_up);y(U.arraw_down)}else{S+=5}U.main.style.cssText="position:absolute; top:"+S+"px; left:"+R+"px;"}function k(){if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}if(window.innerWidth){return window.innerHeight}if(document.body&&document.body.clientWidth){return document.body.clientHeight}return 0}function H(){if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}return(window.pageYOffset||document.body.scrollTop)||0}function d(R){if(R&&R.stopPropagation){R.stopPropagation()}else{window.event.cancelBubble=true}}function w(U,T,S,R){if(U.addEventListener){U.addEventListener(T,S,R!==true)}else{if(U.attachEvent){U.attachEvent("on"+T,S)}else{U["on"+T]=S}}}function E(U,T,S,R){if(U.removeEventListener){U.removeEventListener(T,S,R!==true)}else{if(U.detachEvent){U.detachEvent("on"+T,S)}else{U["on"+T]=null}}}function n(S,R){while(S=S.parentNode){if(S==R){return true}}return false}function I(R){if(typeof R!="string"){return R}var S=/^(\d{4})\-(\d{1,2})\-(\d{1,2})( (\d{1,2})\:(\d{1,2})\:(\d{1,2}))?$/.exec(R);if(!S){return null}if(S[4]){return new Date(parseInt(S[1]),parseInt(S[2])-1,parseInt(S[3]),parseInt(S[5]),parseInt(S[6]),parseInt(S[7]))}return new Date(parseInt(S[1]),parseInt(S[2])-1,parseInt(S[3]))}function q(R){if(R&&typeof R=="object"){return R}return new RegExp("\\b("+R.replace(/\-/g,"\\-").replace(/\s+/g,"|")+")\\b","g")}function A(T,R,S){T.className=((T.className||"").replace(q(R),"")+" "+(S||R)).replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,"")}function g(S,R){S.className=(S.className||"").replace(q(R),"").replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,"")}function t(S,R){return q(R).test(S.className||"")}function h(U,R){var T=q(R),S=t(U,T);if(S){g(U,T)}else{A(U,T,R)}return S}function K(ap,S){var af=0,X=S.cell_height||0,ak=0,al='<div class="b"></div><div class="a"></div>',ah=null;if(S.width){ak=Math.floor(S.width/7);af=ak*7;S.cell_width=ak}if(S.has_container!==true&&S.skin_class_name){ah=P("div",null,ap,"calendar-skin-"+S.skin_class_name+" inline-block")}var aa=P("div",null,ah||ap,"calendar-main inline-block"),R=null,ag=null,Z,W,V,ae,an,ad,ab,Y,ac,am,ai,ao,U,T;if(af>0){aa.style.width=af+"px"}if(S.has_container!==true){R=P("div",null,aa,"calendar-arraw calendar-arraw-up",al)}Z=P("div",null,aa,"calendar-header");W=P("div",null,aa,"calendar-quick");V=P("div",null,W,"calendar-arraw calendar-arraw-up",al);ae=P("div",null,W,"calendar-quick-contents");an=P("div",null,W,"calendar-arraw calendar-arraw-down",al);ad=[["li","area-left"],["li","area-middle"],["li","area-right"],["li","area-left area-month-left"],["li","area-middle-month"],["li","area-right area-month-right"]];j(P("ul",null,Z,"select-box"),ad);ab=ad[1];Y=ad[4];J(W);while(ad.length>0){ad.pop()}ac=P("div",null,aa,"calendar-body-wapper");am=P("ul",null,ac,"calendar-body");for(var aj=0;aj<7;aj++){T=P("li",false,am,"weeks",S.weeks[aj%7]);if(ak>0){T.style.width=ak+"px"}}if(S.show_time===true){ad=[["div","calendar-hours","0"],":",["div","calendar-minutes","0"],":",["div","calendar-seconds","0"]];j(P("div",null,ac,"calendar-time"),ad);ai=ad[0];ao=ad[2];U=ad[4];while(ad.length>0){ad.pop()}}if(S.has_container!==true){ag=P("div",null,ac,"calendar-arraw calendar-arraw-down",al)}return{year:ab,month:Y,weeks:am,main:ah||aa,quick:W,quick_content:ae,hours:ai,minutes:ao,seconds:U,arraw_down:ag,arraw_up:R,down:an,up:V}}var x=window.Eson=function(ad,am,ap){am=am||{};var ac=am.skin||x.skin;if(ac){am.skin_class_name=ac;if(!o.hasOwnProperty(ac)){s(ac,function(){x(ad,am,ap)});return}}if(am.multi===true){am.multi=null;return l(ad,am)}var af={date:null,weeks:"日一二三四五六",onselect:null,first_week_day:0,weeks_count:1,multi_select:false,min:0,max:0,control_union:false,skin:""},aC=[],ah=null,ao=ap||{},aD,aj,ak=null;if(am.min){am.min=+I(am.min)}if(am.max){am.max=+I(am.max)}for(var aB in am){if(!am.hasOwnProperty(aB)){continue}af[aB]=am[aB]}if(typeof af.weeks=="string"){af.weeks=af.weeks.split("")}"string"==typeof(ad)&&(ad=document.getElementById(ad));if(!ad){if(af.onerror){af.onerror("target element error.")}return}var ax=ad.tagName.toLowerCase();if(ax=="input"){if(ad.type!="text"){if(af.onerror){af.onerror("target element error.")}return}}function ar(aH){return L(ah.hours,aH)}function Z(aH){return L(ah.minutes,aH)}function aq(aH){return L(ah.seconds,aH)}function an(){return L(ah.year,true)}function ag(){return L(ah.month,true)}function ae(aH){L(ah.hours,aH.getHours());L(ah.minutes,aH.getMinutes());L(ah.seconds,aH.getSeconds())}function ab(aH,aK,aJ,aI){y(ah.up,aH);ah.up.style.marginLeft=aJ;y(ah.down,aK);ah.down.style.marginLeft=aI}function aF(aI){var aH=null;while((aH=aI.parentNode.className)!="calendar-body"){if(aH.indexOf("calendar-main")>=0){return null}aI=aI.parentNode}return aI}function ay(a0){if(!ah){return}var a2=Q(a0||event);if(a2==document){return}var aW=aF(a2);if(aW){if(t(aW,"weeks")){if(af.multi_select!==true){return}var aR=ah.weeks.getElementsByTagName("li"),aS,aX,aY,aN=-1;for(var aZ=0;aZ<aR.length;aZ++){if(aW==aR[aZ]){aN=aZ}else{if(aN>=0&&aZ%7==aN){aS=new Date(an(),aR[aZ].month-1,aR[aZ].day);if(af.before_select&&af.before_select(aS)===false){continue}aY=p(aS);if(ao[aY]){ao[aY]=null}else{ao[aY]=aS}if(aR[aZ].isInMonth){aX=aS}}}}if(aX){al(aX)}W(at);h(aW,"checked")}else{if(!t(aW,"readonly")){var aH=new Date(aW.year,aW.month-1,aW.day),aJ=[aH.getFullYear(),O(aH.getMonth()+1),O(aH.getDate())];if(af.show_time===true){aH.setHours(ar(),Z(),aq(),0);aJ.push(O(aH.getHours()),O(aH.getMinutes()),O(aH.getSeconds()))}if(af.before_select&&af.before_select(aH)===false){return}J(ah.quick);g(aW,"current");if(af.multi_select===true){aJ.push(!h(aW,"selected"))}else{if(aj){g(aj,"selected")}aj=aW;A(aW,"selected");ao={};ao[p(aH)]=aH;aJ.push(aW);aD=aH}if(af.onselect){af.onselect.apply(aH,aJ)}if(af.multi_select!==true&&!aW.isInMonth){al(aH)}if(af.remain!==true){J(ah.main)}}}return}var a3=a2.tagName.toLowerCase(),aM=a2.className||"",aQ=a2.parentNode.className||"";var aV=ah.quick_content,aT=ah.quick;if(aQ=="calendar-time"){var aL=0,a1,aI="",aK="h";if(aM=="calendar-hours"){aL=23}else{if(aM=="calendar-minutes"||aM=="calendar-seconds"){aL=59;aI=" calendar-quick-minorsec";aK=aM=="calendar-seconds"?"s":"m"}}if(aL>0){ab("none","block","0",B(a2,-4)+"px");a1=L(a2,true);if(ak!=aM||aT.style.display=="none"){ak=aM;D(aV,a1,aL,aK);aT.className="calendar-quick calendar-quick-time"+aI;aT.style.marginTop=(ah.weeks.offsetHeight-aT.offsetHeight)+"px"}else{J(aT)}}return}if(aQ.indexOf("date-part-")>=0){if(aQ.indexOf("date-part-h")>=0){if(af.before_select&&af.before_select(T(null,L(a2,true),null,null))===false){return}ar(L(a2,true))}else{if(aQ.indexOf("date-part-m")>=0){if(af.before_select&&af.before_select(T(null,null,L(a2,true),null))===false){return}Z(L(a2,true))}else{if(aQ.indexOf("date-part-s")>=0){if(af.before_select&&af.before_select(T(null,null,null,L(a2,true)))===false){return}aq(L(a2,true))}else{var aO=L(a2);if(aQ.indexOf("date-part-y")>=0){if(aO=="&lt;&lt;&lt;"){M(L(ah.year,true),a2.parentNode,L(c(a2),true)-23);return}else{if(aO=="&gt;&gt;&gt;"){M(L(ah.year,true),a2.parentNode,L(m(a2),true)+1);return}else{aO=parseInt(aO);if(af.after_select_year){af.after_select_year(aO,0)}aE(aO)}}}else{aO=parseInt(aO);if(af.after_select_month){af.after_select_month(aO,0)}aE(null,aO)}}}}J(aT);R();return}if(t(a2,"area-month-left")){aE(null,L(c(a2),true)-1);var aU=L(c(a2),true);if(i(aT)){e(aU,aV)}if(af.after_select_month){af.after_select_month(aU,-1)}return}if(t(a2,"area-month-right")){aE(null,L(m(a2),true)+1);var aU=L(m(a2),true);if(i(aT)){e(aU,aV)}if(af.after_select_month){af.after_select_month(aU,1)}return}if(t(a2,"area-middle-month")){if(ak!="month"||aT.style.display=="none"){e(L(a2,true),aV);ak="month";aT.style.marginTop="2px";aT.className="calendar-quick";ab("block","none",B(a2,-4)+"px","0")}else{J(aT)}return}if(t(a2,"area-left")){var aP=L(c(a2),true)-1;if(aP<=99){return}if(i(aT)){M(aP,aV,null)}aE(aP);if(af.after_select_year){af.after_select_year(aP,-1)}return}if(t(a2,"area-right")){var aP=L(m(a2),true)+1;if(i(aT)){M(aP,aV,null)}aE(aP);if(af.after_select_year){af.after_select_year(aP,1)}return}if(t(a2,"area-middle")){if(ak!="year"||aT.style.display=="none"){M(L(a2,true),aV,null);ak="year";aT.style.marginTop="2px";aT.className="calendar-quick";ab("block","none",B(a2,-4)+"px","0")}else{J(_quick)}return}}function aw(aI){var aM=ah.weeks,aL;aC.length=0;while(aM.childNodes.length>7){aL=aM.removeChild(aM.lastChild);aL.innerHTML="";aL.onmouseover=aL.onmouseout=null}aL=null;var aK=aI*7,aH=aK-7;for(var aJ=0;aJ<aK;aJ++){aC[aJ]=P("li",false,aM,aJ>=aH?"calendar-last-line":"")}}function al(aJ){aj=null;if(af.before_render){af.before_render(aJ)}var aH=C(aJ,1)-af.first_week_day;if(aH<0){aH=7+aH}var aN=1,aR=aJ.getFullYear(),aK=aJ.getMonth()+1,aQ=aJ.getDate();L(ah.year,aR);L(ah.month,aK);var aT=G(aJ)+aH,aU=af.lines||Math.ceil(aT/7),aS=aU*7;aw(aU);for(var aL=0;aL<aS;aL++){var aM=aC[aL],aP;aM.isInMonth=false;if(aL<aH||aL>(aT-1)){A(aM,"disabled");if(aL<aH){var aO=(new Date(+aJ));aO.setDate(aL-aH+1);aM.day=aO.getDate();aM.month=aK-1}else{aM.day=aL-aT+1;aM.month=aK+1}}else{aM.month=aK;aM.day=aN;aM.isInMonth=true;var aI=C(aJ,aN)%7;if(aI==0||aI==6){A(aM,"sunday")}aN++}aP=new Date(aR,aM.month-1,aM.day);aM.year=aR;L(aM,"<div>"+(af.date_up?(af.date_up.call(aM,aR,aM.month,aM.day)||aM.day):aM.day)+"</div>");if(ao[p(aP)]){A(aM,"selected");aj=aM}aP=+aP;if(af.min>0&&aP<af.min||af.max>0&&aP>af.max){g(aM,"selected sunday");A(aM,"disabled readonly")}else{aM.onmouseover=function(){if(!t(this,"selected")){A(this,"current")}};aM.onmouseout=function(){g(this,"current")}}}if(af.cell_width||af.cell_height){for(var aL=0;aL<aC.length;aL++){if(af.cell_width){aC[aL].style.width=af.cell_width+"px";aC[aL].childNodes[0].style.width=(af.cell_width-4)+"px"}if(af.cell_height){aC[aL].style.height=af.cell_height+"px";aC[aL].childNodes[0].style.height=(af.cell_height-4)+"px"}}}if(af.after_render){af.after_render(aJ)}}function aE(aH,aI){aH||(aH=L(ah.year,true));if(aI!==0){aI||(aI=L(ah.month,true))}while(aI<=0){aI=12+aI;aH--}while(aI>12){aI-=12;aH++}al(new Date(aH,aI-1,1))}function T(aI,aK,aH,aJ){aI=aI||aD;aI.setHours(aK===null?ar():aK,aH===null?Z():aH,aJ===null?aq():aJ);return aI}function W(aJ){var aH=[];for(var aI in ao){if(ao.hasOwnProperty(aI)&&ao[aI]){aH.push(z(ao[aI],af.format?af.format:"yyyy-MM-dd"))}}if(aJ){aJ.call(ao,aH)}else{ad.value=aH.join(",")}}function R(aI){aI=aI||aD;var aH=[aI.getFullYear(),O(aI.getMonth()+1),O(aI.getDate())];if(af.show_time===true){aH.push(O(ar()),O(Z()),O(aq()))}af.onselect.apply(aD,aH)}aD=af.date;if(!aD&&ad.value){aD=ad.value}if(af.multi_select===true){var V={},av=0;if(aD){var Y,aG,az;if(typeof aD=="string"){aD=aD.split(",")}for(var aB=0;aB<aD.length;aB++){Y=I(aD[aB]);aG=p(Y);ao[aG]=Y;az=aG.substr(0,6);if(!V.hasOwnProperty(az)){V[az]=[];av++}V[az].push(Y)}if(av>1&&af.multi!==false){af.max_count=af.max_count||0;af.set_up_months=[];for(var aB in V){if(V.hasOwnProperty(aB)){af.set_up_months.push(V[aB][0])}}if(af.max_count>0&&av>af.max_count){av=af.max_count}af.count=av;return l(ad,af,ao)}}else{aD=[]}var at=af.onselect;af.onselect=function(aK,aH,aJ,aI){if(aI){ao[aK+aH+aJ]=this}else{ao[aK+aH+aJ]=null}W(at)};W(at);af.remain=true;aD=I(aD[0]);if(!aD){aD=new Date()}}else{aD=I(aD);if(!aD){aD=new Date()}ao[p(aD)]=aD;if(!af.onselect){af.onselect=function(aM,aL,aK,aJ,aH,aI){ad.value=af.format?z(this,af.format):(aM+"-"+aL+"-"+aK+(af.show_time===true?(" "+aJ+":"+aH+":"+aI):""))}}var au=[aD.getFullYear(),O(aD.getMonth()+1),O(aD.getDate())];if(af.show_time===true){au.push(O(aD.getHours()),O(aD.getMinutes()),O(aD.getSeconds()))}af.onselect.apply(aD,au)}function aa(aI){if(!ah||!ah.main){return}var aH=Q(aI||event);if(ad==aH||ah.main==aH||n(aH,ah.main)){return}J(ah.main)}function aA(aH){d(aH);N(ah,af.bindto||ad)}function S(aH){N(ah,ad)}var X=null;if(ax=="input"){w(document,"click",aa);w(ad,"focus",S)}else{if(ax=="div"){af.remain=true;X=ad}else{w(document,"click",aa);w(ad,"click",aA)}}ah=K(X,af);if(!X){J(ah.main)}ah.main.onclick=ay;F++;if(af.set_up_date){aD=I(af.set_up_date)||aD}al(aD);if(af.show_time===true){ae(aD)}var U={options:af,controls:ah,set_up:aE,id:F,year:an,month:ag,destroy:function(){E(ad,"click",aA);E(ad,"focus",S);E(document,"click",aa);ah.main.parentNode.removeChild(ah.main);ah.main.onclick=null;for(var aH in ah){if(ah.hasOwnProperty(aH)){ah[aH]=null}}ah=null;ad=null},skin:function(aH){u(ah.main,aH)}};if(af.has_container!==true){var ai=af.after_build||x.after_build;if(ai){ai(U)}}return U};x.skin=null;x.after_build=null;x.skin_path=null;x.format=z;x.on=w;x.off=E;x.cancel_bubble=d;x.child_of=n;var l=function(Y,ac,ae){var ah=[],T=null;function X(aj,an,am,ao){if(am==0){return}var ak;for(var al=0;al<ah.length;al++){if(al!=ao){ak=ah[al];if(aj=="y"){ak.set_up(ak.year()+am)}else{ak.set_up(null,ak.month()+am)}}}}function R(){var an,ap,ak,aj,am=null;if(U.skin_class_name){am=P("div",null,null,"calendar-skin-"+U.skin_class_name+" inline-block")}an=P("div",null,am,"calendar-group inline-block");aj=P("div",null,an,"calendar-arraw calendar-arraw-up",'<div class="b"></div><div class="a"></div>');for(var al=0;al<U.count;al++){if(U.set_up_months){ap=U.set_up_months[al]}T=x(an,a(U,{set_up_date:ap||new Date(),has_container:true}),ae);if(U.control_union===true){T.options.after_select_year=(function(aq){return function(at,ar){X("y",at,ar,aq)}})(ah.length);T.options.after_select_month=(function(aq){return function(at,ar){X("m",at,ar,aq)}})(ah.length);ah.push(T)}T=null}if(U.show_close!==false){var ao=P("div",null,an,"calendar-close","x");ao.onclick=function(aq){J(am||an)}}ak=P("div",null,an,"calendar-arraw calendar-arraw-down",'<div class="b"></div><div class="a"></div>');return{main:am||an,arraw_up:aj,arraw_down:ak,close:ao}}function ab(ak){if(!ad||!ad.main){return}var aj=Q(ak||event);if(Y==aj||ad.main==aj||n(aj,ad.main)){return}J(ad.main)}function V(aj){d(aj);N(ad,U.bindto||Y)}function S(aj){N(ad,Y)}var U={date:[],onselect:null,count:2},ad=null,W=[];for(var ag in ac){if(!ac.hasOwnProperty(ag)){continue}U[ag]=ac[ag]}U.remain=true;U.lines=6;if(!U.onselect){U.onselect=function(aj){Y.value=aj.join(",")}}"string"==typeof(Y)&&(Y=document.getElementById(Y));if(!Y){if(U.onerror){U.onerror("target element error.")}return}var ai=Y.tagName.toLowerCase(),aa=false;if(ai=="input"){if(Y.type!="text"){if(U.onerror){U.onerror("target element error.")}return}w(document,"click",ab);w(Y,"focus",S)}else{if(ai=="div"){aa=true}else{w(document,"click",ab);w(Y,"click",V)}}ad=R();if(aa){Y.appendChild(ad.main)}else{J(ad.main)}var af={options:U,controls:ad,destroy:function(){E(Y,"click",V);E(Y,"focus",S);E(document,"click",ab);for(var aj=0;aj<ah.length;aj++){ah[aj].destroy()}ad.main.parentNode.removeChild(ad.main);if(ad.close){ad.close.onclick=null}for(var aj in ad){if(ad.hasOwnProperty(aj)){ad[aj]=null}}ad=null;Y=null},skin:function(aj){u(ad.main,aj)}};var Z=U.after_build||x.after_build;if(Z){Z(af)}return af}})();